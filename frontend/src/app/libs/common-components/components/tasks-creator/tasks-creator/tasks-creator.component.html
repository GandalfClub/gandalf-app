<form [formGroup]="taskCreatorControl" class="tasks-creator">
  <ng-container *ngIf="!isListEmpty; else emptyList">
    <div class="tasks-creator__header event-gradient">

      <div *ngIf="!isTaskNameEditMode">
        {{ taskName }}
        <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="isTaskNameEditMode = true">
          <mat-icon>mode</mat-icon>
        </button>
      </div>

      <div *ngIf="isTaskNameEditMode">
        <mat-form-field appearance="outline">
          <input matInput type="text"
                 formControlName="taskNameControl"
                 placeholder="Task name">
        </mat-form-field>

        <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="isTaskNameEditMode = false">
          <mat-icon>done</mat-icon>
        </button>
        <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="clearTaskName()">
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <button mat-button matSuffix mat-icon-button aria-label="Delete task">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
    <div class="tasks-creator__body">

      <div class="tasks-creator__basic-settings">

        <mat-form-field appearance="outline">
          <mat-label>{{ 'TASK-CREATION.TASK_TYPE_LABEL' | translate }}</mat-label>
          <mat-select disableOptionCentering formControlName="selectedTaskTypeControl"
                      (openedChange)="onOpenTaskTypesSelector($event)" [value]="taskTypesEnum.single">
            <mat-option *ngFor="let taskType of tasksTypes;" [value]="taskType">
              {{ 'TASK-CREATION.TASKS_TYPES.' + taskType | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div>
          <app-slide-toggle [labelPosition]="'before'"
                            [disabled]="isMentorCheckDisabled()"
                            [value]="isMentorCheckSelected"
                            formControlName="mentorCheckControl"
                            [title]="'Mentor check'"></app-slide-toggle>
          <mat-form-field class="tasks-creator__max-score" appearance="outline">
            <input matInput type="number"
                   formControlName="maxScoreControl"
                   placeholder="{{ 'TASK-CREATION.MAX_SCORE_PLACEHOLDER' | translate }}">
          </mat-form-field>
        </div>

      </div>

      <app-ckeditor formControlName="textEditorControl"
                    theme=lightTheme
                    [title]="'LABEL.PRIVATE_EVENT' | translate"></app-ckeditor>

      <ng-container [ngSwitch]="getSelectedTaskType()">

        <ng-container *ngSwitchCase="taskTypesEnum.single">
          <mat-radio-group
            aria-labelledby="example-radio-group-label"
            class="example-radio-group">

            <div formArrayName="answersArrayControl">
              <div *ngFor="let answer of answerControl.controls; let i = index" [formGroupName]="i">
                <mat-radio-button formControlName="isCorrect"></mat-radio-button>
                <mat-form-field appearance="outline">
                  <mat-label>{{ 'TASK-CREATION.TASK_TYPE_LABEL' | translate }}</mat-label>
                  <input matInput type="text" formControlName="label">
                </mat-form-field>
                <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="removeSingleAnswer(i)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>

          </mat-radio-group>

          <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="addSingleAnswer()">
            <mat-icon>add</mat-icon>
            add new
          </button>

        </ng-container>

        <ng-container *ngSwitchCase="taskTypesEnum.coding">
          <div style="height: 500px; display:block;">
            <app-monaco-editor [language]="'javascript'"></app-monaco-editor>
          </div>
        </ng-container>

        <ng-container *ngSwitchCase="taskTypesEnum.multiple">multip</ng-container>

      </ng-container>
    </div>
  </ng-container>
</form>

<ng-template #emptyList>
  <div class="tasks-creator__empty">
    <span>EMPTY</span>
  </div>
</ng-template>
